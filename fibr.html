<form action="#" class="layui-form" id="fibrsearch-form">
    <div class="layui-form-item">
        <div class="layui-inline">
            <label>题号:</label>
            <div class="layui-inline">
                <input id="fibrqNumInput" type="number" name="qNum" autocomplete="off" placeholder="请输入题号"
                       class="layui-input">
            </div>
            类型:
            <div class="layui-inline">
                <select name="type" id="fibrtypeselection">
                    <option value="1">C哥阅读拖拽蓝色题目</option>
                    <option value="2">C哥阅读拖拽黄色题目</option>
                    <option value="3">C哥阅读拖拽白色题目</option>
                    <option value="4">C哥阅读拖拽全部题目</option>
                    <option value="8">⭐️阅读拖拽月预测除C哥预测其他题</option>
                    <option value="7">阅读拖拽收藏夹</option>
                    <option value="9">错题集</option>
                    <!--                    <option value="5">自定义题目1</option>-->
                    <!--                    <option value="6">自定义题目2</option>-->
                </select>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label" style="color: red">可选选项:</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="usefibrwmodel" title="使用下拉模式做题">
                    <input type="checkbox" name="onlyundo" title="仅显示未做">
                </div>
            </div>
            <button class="layui-btn" lay-header-event="fibrsearch">先点这里加载(搜索)题目</button>
            <button class="layui-btn" lay-header-event="testlucky">试试手气(纯属娱乐)</button>
            <button class="layui-btn" lay-header-event="deleteallrightorfalt">清理本题型的所有对错记录</button>
            <button class="layui-btn" lay-header-event="uncompleted" id="uncompleted">不完整题目</button>
        </div>
    </div>
</form>


<form class="layui-form" action="" id="fibrquestion-form">
    <div id="fibrquestion-div" style="padding-left: 20px;padding-right: 20px; line-height: 50px;font-size: large"></div>

    <div class="layui-inline" id="fibroptions" ondrop="fibrdrop1(event)" ondragover="fibrallowDrop(event)"
         style="border: 1px solid green;margin-top:60px;text-align:center;">

    </div>

    <div class="layui-form-item" style="padding-top: 30px;"id="operationtools">
        <div class="layui-input-block">
            <button type="submit" class="layui-btn" lay-submit lay-header-event="fibrcheckanswer" lay-filter="demo1"
                    hidden="hidden">
                检查答案
            </button>
            <button class="layui-btn" id="fibrpre" lay-header-event="fibrpre" hidden="hidden">上一题</button>
            <button class="layui-btn" id="fibrnext" lay-header-event="fibrnext" hidden="hidden">下一题</button>
            <button class="layui-btn" id="fibrshowanswer" lay-header-event="fibrshowanswer" hidden="hidden">显示/隐藏答案
            </button>
            <button class="layui-btn" id="adddeletefav" lay-header-event="adddeletefav" hidden="hidden">添加到收藏
            </button>
            <div class="layui-inline" id="gotoarea">
                <div class="layui-inline" style="width: 100px;">
                    <input type="number" id="qindex" name="price_min" placeholder="第几题" autocomplete="off"
                           class="layui-input" min="0" step="1" lay-affix="number">
                </div>
                <div class="layui-inline" style="width: 100px;">
                    <button class="layui-btn" id="gotoindex" lay-header-event="gotoindex">跳转</button>
                </div>
                <div class="layui-inline" id="rightandfalt">
                </div>
                <div class="layui-inline">
                    <button class="layui-btn" id="clearrightorfalt" lay-header-event="clearrightorfalt">清理对错记录
                    </button>
                </div>
            </div>
        </div>

    </div>
</form>

<pre class="layui-code answer-area" lay-options="{}" id="fibranswer-area" style="font-size: 18px;font-family: Arial">
</pre>
<script type="text/javascript">
    var localStorageType = "fibr";
    layui.use(['table', 'layer', 'form', 'util'], function () {
        var layer = layui.layer;
        var form = layui.form;
        var util = layui.util;
        $("#fibrquestion-form").hide();
        $("#uncompleted").hide();
        fibrInit();
        form.render();
        $("#fibranswer-area").hide();
        util.event('lay-header-event', {
            fibrsearch: function (obj, event) { // 左侧菜单事件
                fibrsearch(obj, event);
                form.render();
            },
            testlucky: function (obj, event) {
                testfibrlucky(obj, event);
                form.render();
                return false;
            },
            deleteallrightorfalt: function (obj, event) {
                deletefibrallrightorfalt(obj, event);
            },
            clearrightorfalt: function (obj, event) {
                clearfibrrightorfalt(obj, event);
            },
            uncompleted: function (obj, event) {
                fibrUncompleted(obj, event);
            },
            fibrnext: function (obj, event) {
                var result = nextFibRQuestion(obj, event);
                form.render();
                return result;
            },
            fibrpre: function (obj, event) {
                fibrpre(obj, event);
                form.render();
                return false;
            },
            fibrcheckanswer: function (obj, event) {
                fibrcheckanswer(obj, event,form);
               form.render();
                return false;
            },
            fibrshowanswer: function (obj, event) {
                fibrshowanswer(obj, event);
            },
            gotoindex: function (obj, event) {
                firbgotoindex(obj, event);
            },
            adddeletefav: function (obj, event) {
                adddeletefibrfav(obj, event);

            }
        });
        // 自定义验证规则
        form.verify({
            answer: function (value, obj) {
                console.log("检查非空");
                if (!value) {
                    var attr = $(obj).attr("style");
                    attr = "border: 1px solid red;" + attr;
                    $(obj).attr("style", attr);
                    return "必填项不能为空";
                }
            }
        });
    })
    $.fn.serializeJson = function () {
        var serializeObj = {};
        var array = this.serializeArray();
        $.each(array, function () {
            if (serializeObj[this.name] !== undefined) {
                if (!serializeObj[this.name].push) {
                    serializeObj[this.name] = [serializeObj[this.name]];
                }
                serializeObj[this.name].push(this.value || '');
            } else {
                serializeObj[this.name] = this.value || '';
            }
        });
        return serializeObj;
    };



   
    
</script>
